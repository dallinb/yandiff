#summary Test Plan
#labels Phase-QA

=Test Plan=

==Description==
This is a description of the series of tests to be carried out to test the individual requirements of the utility.  This will include checking that hosts can be filtered on individual status (new, changed or missing) and that ports on changed hosts can be filtered depending on the status returned by Nmap.  These are open, closed, filtered, unfiltered, open|filtered and closed|filtered `[1]`.

==Test Data==
A minimal set of test data will be prepared to carry out the specific tests.
This data is not intended to be realistic from a scanning point of view.  It
is merely to test the functionality of the script.

===Baseline===
The baseline file (baseline_qa.xml) will consist of two hosts called alpha and beta.  These hosts will have the following details:

|| *Host* || *IP* ||
||alpha||192.168.1.8||
||bravo||192.168.1.16||

Both of the hosts will have been configured with the following services:

|| *Protocol* || *Port* || *Status* ||
||tcp||1||open||
||tcp||2||open||
||tcp||3||open||
||tcp||4||open||
||tcp||5||open||
||tcp||6||open||
||tcp||7||open||
||udp||1||open||
||udp||2||open||
||udp||3||open||
||udp||4||open||
||udp||5||open||
||udp||6||open||
||udp||7||open||

===Observed===
The changes in the observed scan (observed_qa.xml) will be that  alpha will be renamed to charlie and have the IP address changed to 192.168.1.24.  Except for these changes, the host will remain unchanged.  The bravo host will have the following services configured:

|| *Protocol* || *Port* || *Status* ||
||tcp||1||open||
||tcp||2||open||
||tcp||3||open||
||tcp||4||open||
||tcp||5||open||
||tcp||6||open||
||tcp||7||open||
||tcp||8||open||
||tcp||9||open||
||tcp||10||open||
||tcp||11||open||
||tcp||12||open||
||tcp||13||open||
||udp||1||open||
||udp||2||open||
||udp||3||open||
||udp||4||open||
||udp||5||open||
||udp||6||open||
||udp||7||open||
||udp||8||open||
||udp||9||open||
||udp||10||open||
||udp||11||open||
||udp||12||open||
||udp||13||open||

==Test Schedule==
1) `xndiff –baseline baseline_qa.xml --observed observed_qa.xml`

The output should list charlie as a new host, alpha as a missing host and
bravo with the following port status for both TCP and UDP:

|| *Reason* || *Port* || *Observed Status*  ||
|| New || 8 || open ||
|| New || 9 || closed ||
|| New || 10 || filtered ||
|| New || 11 || unfiltered ||
|| New || 12 || closed|filtered ||
|| New || 13 || open|filtered ||
|| Changed || 3 || closed ||
|| Changed || 4 || filtered ||
|| Changed || 5 || unfiltered ||
|| Changed || 6 || closed|filtered ||
|| Changed || 7 || open|filtered ||

2) `xndiff –baseline baseline_qa.xml --observed observed_qa.xml --output-hosts n`

Should only return charlie.

3) `xndiff –baseline baseline_qa.xml --observed observed_qa.xml --output-hosts c`

Should only return bravo.

4) `xndiff –baseline baseline_qa.xml --observed observed_qa.xml --output-hosts m`

Should only return alpha.

5) `xndiff -baseline baseline_qa.xml --observed observed_qa.xml --output-hosts c -output-ports o`

Should return bravo and ports 8, 7 and 13 for both TCP and UDP.

6) `xndiff -baseline baseline_qa.xml --observed observed_qa.xml --output-hosts c -output-ports f`

Should return bravo and ports 4, 6, 7, 10, 12 and 13 for both TCP and UDP.

7) `xndiff -baseline baseline_qa.xml --observed observed_qa.xml --output-hosts c -output-ports c`

Should return bravo and ports 3, 6, 9 and 12 for both TCP and UDP.

8) `xndiff -baseline baseline_qa.xml --observed observed_qa.xml --output-hosts c -output-ports x`

Should return bravo and ports 5 and 11 for both TCP and UDP.

Results should be recorded using the [FunctionalTestTemplate].

==Performance Testing==
James Levine stated that the original ndiff ran too slowly (3 scanned hosts per second).  While the majority of processing is parsing the XML files and this handled by Anthony Persaud's excellent Nmap::Parser we thought a benchmark test was required.  This was carried out in late 2008 using version 0.3 of xndiff.  The results were recorded [PerformanceTest20081219 here].  While attempting to adjust the results according the MHz speed of the system processors is not perfect, it is the best that can be done given the information provided.

==References==

`[1]` – _Nmap Reference Guide:  Port Scanning Basics_, available from < http://nmap.org/book/man-port-scanning-basics.html >, downloaded on 31 December 2008.
