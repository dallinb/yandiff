#summary Test Plan
#labels Phase-QA

=Test Plan=

==Description==
This is a description of the series of tests to be carried out to test the individual requirements of the utility.  This will include checking that hosts can be filtered on individual status (new, changed or missing) and that ports on changed hosts can be filtered depending on the status returned by Nmap.  These are open, closed, filtered, unfiltered, open|filtered and closed|filtered `[1]`.

==Test Data==
A minimal set of test data will be prepared to carry out the specific tests.

===Baseline===
The baseline file (baseline_qa.xml) will consist of two hosts called alpha and beta.  These hosts will have the following details:

|| *Host* || *IP* ||
||alpha||192.168.1.8||
||bravo||192.168.1.16||

Both of the hosts will have been configured with the following services:

|| *Protocol* || *Port* || *Name* || *Status* ||
||tcp||21||ftp||open||
||tcp||22||ssh||open||
||tcp||23||telnet||open||
||tcp||79||finger||open||
||tcp||110||pop3||open||
||tcp||111||rpcbind||open||
||tcp||514||shell||open||
||udp||514||syslog||open||
||tcp||886||N/A||open||
||tcp||2049||nfs||open||
||udp||2049||nfs||open||

===Observed===
The changes in the observed scan (observed_qa.xml) will be that  alpha will be renamed to charlie and have the IP address changed to 192.168.1.24.  Except for these changes, the host will remain unchanged.  The bravo host will have the following services configured:

|| *Protocol* || *Port* || *Name* || *Status* ||
||tcp||21||ftp||closed||
||tcp||22||ssh||filtered||
||tcp||23||telnet||unfiltered||
||tcp||79||finger||open|filtered||
||tcp||110||pop3||closed|filtered||
||tcp||111||rpcbind||open||
||tcp||514||shell||open||
||tcp||2049||nfs||open|filtered||
||udp||123||ntp||open||
||udp||514||syslog||open|filtered||
||udp||525||timed||unfiltered||
||udp||533||netwall||filtered||
||udp||2049||nfs||closed|filtered||

==Test Schedule==
1) `xndiff –baseline baseline_qa.xml --observed observed_qa.xml`

The output should list charlie as a new host, bravo as a changed host with various ports in a changed status (which will be tested more thoughly later) and alpha as a missing host.

2) `xndiff –baseline baseline_qa.xml --observed observed_qa.xml --output-hosts n`

Should only return charlie.

3) `xndiff –baseline baseline_qa.xml --observed observed_qa.xml --output-hosts c`

Should only return bravo.

4) `xndiff –baseline baseline_qa.xml --observed observed_qa.xml --output-hosts m`

Should only return alpha.

5) `xndiff -baseline baseline_qa.xml --observed observed_qa.xml --output-hosts c -output-ports o`

Should return bravo and ports 79/tcp, 123/udp, 514/udp and 2049/tcp.

6) `xndiff -baseline baseline_qa.xml --observed observed_qa.xml --output-hosts c -output-ports f`

Should return bravo and ports 22/tcp, 79/tcp, 110/tcp, 514/udp, 533/udp, 2049/udp and 2049/tcp.

7) `xndiff -baseline baseline_qa.xml --observed observed_qa.xml --output-hosts c -output-ports c`

Should return bravo and port 21/tcp, 110/tcp and 2049/udp.

8) `xndiff -baseline baseline_qa.xml --observed observed_qa.xml --output-hosts c -output-ports x`

Should return bravo and port 23/tcp and 525/udp.

Results should be recorded using the [FunctionalTestTemplate].

==Performance Testing==
James Levine stated that the original ndiff ran too slowly (3 scanned hosts per second).  While the majority of processing is parsing the XML files and this handled by Anthony Persaud's excellent Nmap::Parser we thought a benchmark test was required.  This was carried out in late 2008 using version 0.3 of xndiff.  The results were recorded [PerformanceTest20081219 here].  While attempting to adjust the results according the MHz speed of the system processors is not perfect, it is the best that can be done given the information provided.

==References==

`[1]` – _Nmap Reference Guide:  Port Scanning Basics_, available from < http://nmap.org/book/man-port-scanning-basics.html >, downloaded on 31 December 2008.
